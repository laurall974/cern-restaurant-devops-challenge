FROM node:20-alpine

ENV CERN_RESTAURANT_CLIENT_PORT=${CERN_RESTAURANT_CLIENT_PORT}
ENV CERN_RESTAURANT_CLIENT_PREFIX=ยง{CERN_RESTAURANT_CLIENT_PREFIX}
ENV VITE_BACKEND_URL=${VITE_BACKEND_URL}

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install --ignore-scripts

COPY . .

RUN npm run build

EXPOSE ${CERN_RESTAURANT_CLIENT_PORT}

ENTRYPOINT ["npm", "run", "dev"]
